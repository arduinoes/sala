var R=Object.defineProperty,E=Object.defineProperties;var F=Object.getOwnPropertyDescriptors;var y=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;var f=(a,e,o)=>e in a?R(a,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[e]=o,V=(a,e)=>{for(var o in e||(e={}))A.call(e,o)&&f(a,o,e[o]);if(y)for(var o of y(e))B.call(e,o)&&f(a,o,e[o]);return a},v=(a,e)=>E(a,F(e));import{o as i,a as d,b as s,t as u,H as T,F as x,l as I,C,z as q,q as z,n as $,W as L,D as g,G as M,I as k,J as D,K as p,L as G,Q,k as W,d as r,u as n,M as _,N as U,O as h}from"./vendor.c21289e2.js";import{d as b,s as w,N as j}from"./index.54114795.js";const H={class:"container"},J={class:"mb-3"},K={class:"form-label"},O=["placeholder","value"],c={props:{label:{type:String,default:""},modelValue:{type:[String,Number],default:""}},setup(a){return(e,o)=>(i(),d("div",H,[s("div",J,[s("label",K,u(a.label),1),s("input",{type:"text",class:"form-control",placeholder:a.label,value:a.modelValue,onInput:o[0]||(o[0]=t=>e.$emit("update:modelValue",t.target.value))},null,40,O)])]))}},P={class:"container"},X={class:"mb-3"},Y={class:"form-label"},Z=["placeholder","value"],ee={props:{label:{type:String,default:""},modelValue:{type:[Date,String,Number],default:""}},setup(a){return(e,o)=>(i(),d("div",P,[s("div",X,[s("label",Y,u(a.label),1),s("input",{type:"date",class:"form-control",placeholder:a.label,value:a.modelValue,onInput:o[0]||(o[0]=t=>e.$emit("update:modelValue",t.target.value))},null,40,Z)])]))}},te={class:"container"},ae={class:"mb-3"},oe={class:"form-label"},le=["placeholder","value"],se={props:{label:{type:String,default:""},modelValue:{type:[String,Number],default:""}},setup(a){return(e,o)=>(i(),d("div",te,[s("div",ae,[s("label",oe,u(a.label),1),s("textarea",{type:"text",class:"form-control",placeholder:a.label,value:a.modelValue,onInput:o[0]||(o[0]=t=>e.$emit("update:modelValue",t.target.value)),rows:"3"},null,40,le)])]))}},ne={class:"container"},re={class:"mb-3"},ie={class:"form-label"},de=["value"],ue=["value","selected"],ce={props:{opciones:{type:Array,required:!0},label:{type:String,default:""},modelValue:{type:[String,Number],default:""}},setup(a){return(e,o)=>(i(),d("div",ne,[s("div",re,[s("label",ie,u(a.label),1),s("select",T({class:"form-select",value:a.modelValue},v(V({},e.$attrs),{onChange:t=>{e.$emit("update:modelValue",t.target.value)}})),[(i(!0),d(x,null,I(a.opciones,t=>(i(),d("option",{value:t,key:t,selected:t===a.modelValue},u(t),9,ue))),128))],16,de)])]))}},S=C(),be=q({id:"principal",state:()=>({file:null,datoImagen:null,error:null,editar:!1,loading:!1,urlDescarga:"",ages:["2 anos","3 anos","4 anos","Todas as idades","Recomendado para adultos"],obras:[],obra:{id:"",title:"",company:"",director:"",cast:"",synopsis:"",date:"",link:"",age:"",time:"",photo:""}}),actions:{async obtenerDatos(){this.obras=[],(await z($(b,"obras"))).forEach(e=>{let o=e.data();o.id=e.id,this.obras.push(o),console.log(o)})},async eliminarDato(a){await L(g(b,"obras",a)),S.go("/")},async obtenerDatoID(a){const e=g(b,"obras",a),o=await M(e);o.exists()?(this.obra=o.data(),this.obra.id=o.id):console.log("\xA1No existe el documento!")},buscarImagen(a){const e=a.target.files[0].type;if(e==="image/jpeg"||e==="image/png")this.file=a.target.files[0],this.error=null;else{this.error="Archivo no v\xE1lido",this.file=null;return}const o=new FileReader;o.readAsDataURL(this.file),o.onload=t=>{this.datoImagen=t.target.result}},async agregarDato(){try{this.loading=!0;const a=k(w,"imagenes/"+this.file.name),e=D(a,this.file);e.on("state_changed",t=>{const l=t.bytesTransferred/t.totalBytes*100;switch(console.log("Upload is "+l+"% done"),t.state){case"paused":console.log("Upload is paused");break;case"running":console.log("Upload is running");break}},t=>{},()=>{p(e.snapshot.ref).then(t=>{console.log("File available at",t)})});const o=await p(a);await G($(b,"obras"),{title:this.obra.title,company:this.obra.company,director:this.obra.director,cast:this.obra.cast,synopsis:this.obra.synopsis,age:this.obra.age,link:this.obra.link,time:this.obra.time,date:this.obra.date,photo:o}),this.error="Imagen subida con \xE9xito",this.file=null}catch(a){console.log(a)}finally{C().push("/"),this.loading=!1}},async actualizarDato(){try{this.loading=!0;const a=k(w,"imagenes/"+this.file.name),e=D(a,this.file);e.on("state_changed",l=>{const m=l.bytesTransferred/l.totalBytes*100;switch(console.log("Upload is "+m+"% done"),l.state){case"paused":console.log("Upload is paused");break;case"running":console.log("Upload is running");break}},l=>{},()=>{p(e.snapshot.ref).then(l=>{console.log("File available at",l)})});const o=await p(a),t=g(b,"obras",this.obra.id);await Q(t,{title:this.obra.title,company:this.obra.company,director:this.obra.director,cast:this.obra.cast,synopsis:this.obra.synopsis,age:this.obra.age,link:this.obra.link,time:this.obra.time,date:this.obra.date,photo:o}),this.error="Imagen subida con \xE9xito",this.file=null}catch(a){console.log(a)}finally{S.push("/"),this.loading=!1}}}}),me={class:"container my-4"},pe={class:"input-group my-3"},he={class:"mt-3"},ge={class:"mt-4"},ye=["src"],fe={class:"table"},Ve=s("thead",null,[s("tr",null,[s("th",{scope:"col"},"id"),s("th",{scope:"col"},"Author"),s("th",{scope:"col"},"Fecha"),s("th",{scope:"col"},"Editar"),s("th",{scope:"col"},"Eliminar")])],-1),ve={scope:"row"},$e=["onClick"],ke=["onClick"],we={setup(a){const e=be();return W(()=>{e.obtenerDatos()}),(o,t)=>(i(),d("div",null,[r(j),s("div",me,[s("form",null,[r(c,{modelValue:n(e).obra.company,"onUpdate:modelValue":t[0]||(t[0]=l=>n(e).obra.company=l),type:"text",label:"Compa\xF1ia"},null,8,["modelValue"]),r(c,{modelValue:n(e).obra.title,"onUpdate:modelValue":t[1]||(t[1]=l=>n(e).obra.title=l),type:"text",label:"T\xEDtulo"},null,8,["modelValue"]),r(c,{modelValue:n(e).obra.director,"onUpdate:modelValue":t[2]||(t[2]=l=>n(e).obra.director=l),type:"text",label:"Director"},null,8,["modelValue"]),r(c,{modelValue:n(e).obra.cast,"onUpdate:modelValue":t[3]||(t[3]=l=>n(e).obra.cast=l),type:"text",label:"Elenco"},null,8,["modelValue"]),r(se,{modelValue:n(e).obra.synopsis,"onUpdate:modelValue":t[4]||(t[4]=l=>n(e).obra.synopsis=l),type:"text",label:"Descripci\xF3n"},null,8,["modelValue"]),r(c,{modelValue:n(e).obra.link,"onUpdate:modelValue":t[5]||(t[5]=l=>n(e).obra.link=l),type:"text",label:"Enlace"},null,8,["modelValue"]),r(ce,{modelValue:n(e).obra.age,"onUpdate:modelValue":t[6]||(t[6]=l=>n(e).obra.age=l),opciones:n(e).ages,label:"Selecciona una categor\xEDa"},null,8,["modelValue","opciones"]),r(c,{modelValue:n(e).obra.time,"onUpdate:modelValue":t[7]||(t[7]=l=>n(e).obra.time=l),type:"text",default:"60 minutos",label:"Duraci\xF3n"},null,8,["modelValue"]),r(ee,{modelValue:n(e).obra.date,"onUpdate:modelValue":t[8]||(t[8]=l=>n(e).obra.date=l),type:"date",label:"Fecha"},null,8,["modelValue"]),r(c,{modelValue:n(e).obra.photo,"onUpdate:modelValue":t[9]||(t[9]=l=>n(e).obra.photo=l),type:"text",label:"Imagen"},null,8,["modelValue"]),s("div",pe,[s("input",{type:"file",onChange:t[10]||(t[10]=l=>n(e).buscarImagen(l))},null,32)]),s("div",he,[_(s("button",{onClick:t[11]||(t[11]=h(l=>n(e).actualizarDato(o.id),["prevent"])),class:"btn btn-primary"}," Actualizar ",512),[[U,n(e).editar===!0]]),_(s("button",{onClick:t[12]||(t[12]=h(l=>n(e).agregarDato(),["prevent"])),class:"btn btn-primary"}," Guardar ",512),[[U,n(e).editar===!1]]),s("div",ge,[s("img",{src:n(e).datoImagen},null,8,ye)])])])]),s("table",fe,[Ve,s("tbody",null,[(i(!0),d(x,null,I(n(e).obras,(l,m)=>(i(),d("tr",{key:m},[s("th",ve,u(m),1),s("td",null,u(l.company),1),s("td",null,u(l.date),1),s("td",null,[s("button",{onClick:h(N=>{n(e).obtenerDatoID(l.id),this.datos.editar=!this.datos.editar},["prevent"]),class:"btn btn-primary"},"Editar ",8,$e)]),s("td",null,[s("button",{onClick:h(N=>n(e).eliminarDato(l.id),["prevent"]),class:"btn btn-danger"},"Eliminar ",8,ke)])]))),128))])])]))}};export{we as default};
